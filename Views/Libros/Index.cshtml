@model List<BibliotecaWeb.Models.Libro>
@{
    ViewData["Title"] = "Libros";
}

<div class="container mt-4">
    <h2>üìö Lista de Libros</h2>
    
    <table class="table table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>T√≠tulo</th>
                <th>Autor</th>
                <th>ISBN</th>
                <th>Estado</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var libro in Model)
            {
                <tr>
                    <td>@libro.LibroID</td>
                    <td>@libro.Titulo</td>
                    <td>@libro.Autor</td>
                    <td>@libro.ISBN</td>
                    <td>
                        @if (libro.Estado == "Disponible")
                        {
                            <span class="badge badge-success">@libro.Estado</span>
                        }
                        else if (libro.Estado == "Prestado")
                        {
                            <span class="badge badge-warning">@libro.Estado</span>
                        }
                        else
                        {
                            <span class="badge badge-info">@libro.Estado</span>
                        }
                    </td>
                    <td>
                        
                        <!-- BOT√ìN NUEVO: SOLICITAR PR√âSTAMO -->
                        @if (libro.Estado == "Disponible")
                        {
                            <a href="/Prestamos/Create?libroID=@libro.LibroID" 
                               class="btn btn-success btn-sm">
                                üì• Pedir Prestado
                            </a>
                            <a href="/Reservas/Create?libroID=@libro.LibroID" 
                               class="btn btn-warning btn-sm">
                                üìã Reservar
                            </a>
                        }
                         else if (libro.Estado == "Prestado")
                        {
                         <a href="/Reservas/Create?libroID=@libro.LibroID" 
                             class="btn btn-warning btn-sm">
                             üìã Reservar
                         </a>
                        <button class="btn btn-secondary btn-sm" disabled>
                               Prestado
                        </button>
                        }
                         else if (libro.Estado == "Reservado")
                        {
                            <button class="btn btn-secondary btn-sm" disabled>
                            Reservado
                            </button>
                        }
                        else
                        {
                            <button class="btn btn-secondary btn-sm" disabled>
                                No Disponible
                            </button>
                        }
                    </td>
                    
                </tr>
            }
        </tbody>
    </table>

    <a href="/Home" class="btn btn-secondary">‚Üê Volver al Dashboard</a>
</div>